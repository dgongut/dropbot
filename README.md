# dropbot
[![](https://badgen.net/badge/icon/github?icon=github&label)](https://github.com/dgongut/dropbot)
[![](https://badgen.net/badge/icon/docker?icon=docker&label)](https://hub.docker.com/r/dgongut/dropbot)
[![](https://badgen.net/badge/icon/telegram?icon=telegram&label)](https://t.me/dockercontrollerbotnews)
[![Docker Pulls](https://badgen.net/docker/pulls/dgongut/dropbot?icon=docker&label=pulls)](https://hub.docker.com/r/dgongut/dropbot/)
[![Docker Stars](https://badgen.net/docker/stars/dgongut/dropbot?icon=docker&label=stars)](https://hub.docker.com/r/dgongut/dropbot/)
[![Docker Image Size](https://badgen.net/docker/size/dgongut/dropbot?icon=docker&label=image%20size)](https://hub.docker.com/r/dgongut/dropbot/)
![Github stars](https://badgen.net/github/stars/dgongut/dropbot?icon=github&label=stars)
![Github forks](https://badgen.net/github/forks/dgongut/dropbot?icon=github&label=forks)
![Github last-commit](https://img.shields.io/github/last-commit/dgongut/dropbot)
![Github last-commit](https://badgen.net/github/license/dgongut/dropbot)
![alt text](https://github.com/dgongut/pictures/blob/main/dropbot/mockup.png)

Descarga archivos directamente en tu servidor a su carpeta correspondiente

- ‚úÖ Detecci√≥n de archivos de Audio
- ‚úÖ Detecci√≥n de archivos de V√≠deo
- ‚úÖ Detecci√≥n de archivos de Documentos
- ‚úÖ Detecci√≥n de archivos de Fotos
- ‚úÖ Detecci√≥n de archivos de Torrent
- ‚úÖ Soporte de idiomas (Spanish, English)

¬øLo buscas en [![](https://badgen.net/badge/icon/docker?icon=docker&label)](https://hub.docker.com/r/dgongut/dropbot)?

üñºÔ∏è Si deseas establecerle el icono al bot de telegram, te dejo [aqu√≠](https://raw.githubusercontent.com/dgongut/pictures/main/dropbot/dropbot.png) el icono en alta resoluci√≥n. Solo tienes que descargarlo y mand√°rselo al @BotFather en la opci√≥n de BotPic.

## Configuraci√≥n en config.py

| CLAVE                          | OBLIGATORIO | VALOR                                                                                   |
|---------------------------------|:------------:|-----------------------------------------------------------------------------------------|
| TELEGRAM_TOKEN                 |‚úÖ            | Token del bot |
| TELEGRAM_ADMIN                 |‚úÖ            | ChatId del administrador (se puede obtener habl√°ndole al bot Rose escribiendo /id). Admite m√∫ltiples administradores separados por comas. Por ejemplo 12345,54431,55944 |
| TELEGRAM_API_HASH              | ‚úÖ           | Hash de la API de Telegram (obtenido al crear tu aplicaci√≥n en https://my.telegram.org) |
| TELEGRAM_API_ID                | ‚úÖ           | ID de la API de Telegram (obtenido al crear tu aplicaci√≥n en https://my.telegram.org)   |
| LANGUAGE                       | ‚úÖ           | Idioma del bot (por defecto "ES" para espa√±ol o "EN" para ingl√©s)                       |
| DEFAULT_DOWNLOAD_PATH          | ‚úÖ           | Ruta por defecto donde se almacenar√°n los archivos descargados                          |
| DEFAULT_DOWNLOAD_AUDIO         | ‚ùå           | Ruta donde se almacenar√°n los archivos de audio descargados                             |
| DEFAULT_DOWNLOAD_VIDEO         | ‚ùå           | Ruta donde se almacenar√°n los archivos de video descargados                             |
| DEFAULT_DOWNLOAD_PHOTO         | ‚ùå           | Ruta donde se almacenar√°n las im√°genes descargadas                                      |
| DEFAULT_DOWNLOAD_DOCUMENT      | ‚ùå           | Ruta donde se almacenar√°n los documentos descargados                                    |
| DEFAULT_DOWNLOAD_TORRENT       | ‚ùå           | Ruta donde se almacenar√°n los archivos torrent descargados                              |

### Anotaciones
Ser√° necesario mapear un volumen para almacenar lo que el bot escribe en /app/schedule

### Ejemplo de Docker-Compose para su ejecuci√≥n normal

```yaml
services:
  dropbot:
    environment:
      - TELEGRAM_TOKEN=
      - TELEGRAM_ADMIN=
      - TELEGRAM_API_HASH=
      - TELEGRAM_API_ID=
      - LANGUAGE=ES
      - DEFAULT_DOWNLOAD_PATH=/downloads
      #- DEFAULT_DOWNLOAD_AUDIO=/audio
      #- DEFAULT_DOWNLOAD_VIDEO=/video
      #- DEFAULT_DOWNLOAD_PHOTO=/photo
      #- DEFAULT_DOWNLOAD_DOCUMENT=/document
      #- DEFAULT_DOWNLOAD_TORRENT=/torrent
    volumes:
      - /ruta/para/descargar/general:/downloads
      #- /ruta/para/descargar/audio:/audio
      #- /ruta/para/descargar/video:/video
      #- /ruta/para/descargar/foto:/photo
      #- /ruta/para/descargar/documentos:/document
      #- /ruta/para/descargar/torrent:/torrent
    image: dgongut/dropbot:latest
    container_name: dropbot
    restart: always
    network_mode: host
    tty: true
```

---

## Solo para desarrolladores - Ejecuci√≥n con c√≥digo local

Para su ejecuci√≥n en local y probar nuevos cambios de c√≥digo, se necesita renombrar el fichero `.env-example` a `.env` con los valores necesarios para su ejecuci√≥n.
Es necesario establecer un `TELEGRAM_TOKEN` y un `TELEGRAM_ADMIN` correctos y diferentes al de la ejecuci√≥n normal.

La estructura de carpetas debe quedar:

```
dropbot/
    ‚îú‚îÄ‚îÄ .env
    ‚îú‚îÄ‚îÄ .gitignore
    ‚îú‚îÄ‚îÄ LICENSE
    ‚îú‚îÄ‚îÄ requirements.txt
    ‚îú‚îÄ‚îÄ README.md
    ‚îú‚îÄ‚îÄ config.py
    ‚îú‚îÄ‚îÄ dropbot.py
    ‚îú‚îÄ‚îÄ Dockerfile_local
    ‚îú‚îÄ‚îÄ docker-compose.yaml
    ‚îî‚îÄ‚îÄ locale
        ‚îú‚îÄ‚îÄ en.json
        ‚îî‚îÄ‚îÄ es.json
```

Para levantarlo habr√≠a que ejecutar en esa ruta: `docker compose up -d`

Para detenerlo y eliminarlo: `docker compose down --rmi`
